{% extends "basic/base1.html" %}
{% load static meta compress %}

{% block django_meta %}
    {% include 'meta/meta.html' %}
{% endblock django_meta %}

{% block canonical_url %}
       <link rel="canonical" href="{{canonical_url}}">
{% endblock canonical_url %}
    
{% block css_section %}
    {{block.super}}
    {% compress css %}
    <link type="text/css" href="{% static '/shinelearn/css/product/detail.css' %}" rel="stylesheet">
    <link type="text/css" href="{% static 'shinelearn/css/skill/extra.css' %}" rel="stylesheet">
    {% endcompress %}
{% endblock css_section %}
    

{% block main_container %}
    {% block page_heading %}

      <!-- header -->
      <header>
        
        <div class="detail-course-header">
          <div class="container">
            <!-- breadcrums -->
            {% block breadcrumbs %}
              {% include "shop/partials/breadcrumb.html" %}  
            {% endblock breadcrumbs %}
            
            {% block product_header %}
              <div class="course-caption col-sm-8 no-pad">
                <div class="course-caption-img">
                  <figure style="background-color:#fff;">
                    <img src="{{prd_img}}" alt="{{prd_img_alt}}" class="img-responsive" >
                  </figure>
                </div>

                <div class="course-caption-content">
                  <h1>{{prd_H1}}</h1>

                  {% include "shop/partials/packagediv.html" %}
                </div>
              </div>
            {% endblock product_header %}
          </div>
        </div>

            {% block product_cart %}
              {% include "shop/partials/prd_cart.html" %}
            {% endblock product_cart %}
        
      </header>

      
    {% endblock page_heading %}

    {% block section1 %}
      <!-- main parent1 section start -->
      <section class="container-fluid cls_scroller_parent pr">
          <div class="row detail-box bt-none">

            <!-- sticky sub header 1 -->
            <div class="course-caption-bottom cls_scroller">
              <div class="container">
                <div class="visible-onscroll hidden cls_scroller_hiddenDiv">
                  <strong>{{prd_H1}}</strong> by <small>{{prd_vendor}}</small>
                </div>

                  <ul>
                        
                    <li>
                      <div class="rating-review-box">
                        {% for star in prd_rating_star %}
                          {% if star == '*' %}
                            <figure class="full-star"></figure>
                          {% elif star == '+' %}
                            <figure class="half-star"></figure>
                          {% else %}
                            <figure class="blank-star"></figure>
                          {% endif %}
                        {% endfor %}  
                    
                          <strong>{{prd_rating}}/5</strong>{{prd_num_rating}}&nbsp;ratings
                      </div> 
                    </li>
                    
                    <li>
                     <a href="javascript:void(0);">
                      <figure class="review-icon"></figure>
                      <span><strong class="anchor-color">&nbsp;{{prd_num_rating}}</strong>&nbsp;reviews</span>
                     </a> 
                    </li>
                    <li>
                    <figure class="bought-icon"></figure>
                    <span><strong>&nbsp;{{prd_num_bought}}</strong>&nbsp;people bought</span>
                    </li>
                    {% if prd_service == 'course' %}
                  
                    {% if prd_num_jobs %}
                      <li>
                       <a href="{% if num_jobs_url %}{{num_jobs_url}}{% else %}javascript:void(0);{% endif %}" target="_blank">
                        <figure class="course-jobs-icon"></figure>
                        <span><strong class="anchor-color">&nbsp;{{prd_num_jobs}}</strong>&nbsp;Jobs available</span>
                       </a> 
                      </li>
                    {% endif %}
                    
                    {% if prd_cert %}
                      <li>
                        <figure class="certification-icon"></figure>
                        <span>&nbsp;Certification</span>
                      </li>
                    {% endif %}
                  {% endif %}
                </ul>

              </div>
            </div>

            
            <div class="container">
            <!-- About course -->
              <div class="row">
                <div class="col-sm-12 col-md-8 mt-40">
                {% if prd_about %}
                  <h2 class="detail-heading">About {% if prd_service == 'course' %}course{% else %}service{% endif %}</h2>
                  <style>
                    .morecontent span {
                          display: none;
                      }
                      .morelink {
                          display: block;
                      }
                  </style>
                  <span class="more">
                  {{prd_about|safe}}
                  </span>
                {% endif %}
                </div>
              </div>

            {% include "shop/partials/product_child.html" %}
            
            {% include "shop/partials/product_variations.html" %}
            
            {% include "shop/partials/frequentlybought.html" %}
          </div>
      </section>
      <!-- main parent1 section end -->


    {% endblock section1 %}

    {% block section2 %}
      
      <!-- main parent2 section start -->
      <section class="container-fluid cls_scroller_parent pr">
        <div class="row">

             <!-- About course container -->
            <section id="about-course" class="container-fluid">
              <div class="row detail-course-links cls_scroller pr">
              <!-- sticky sub header 2 -->
                <div class="container">
                  <div class="col-sm-12 col-md-8 about-tab">
                  {% if prd_desc %}
                    <a title="About product" class="active" href="#course">About product</a>
                  {% endif %}
                  {% if prd_uget %}
                    <a title="What’ll you get" href="#get">What’ll you get</a>
                  {% endif %}
                  {% if prd_service == 'course' and chapter_list %}
                    <a title="Program structure" href="#programs">Program structure</a>
                  {% endif %}
                     <a title="How to begin" href="#delivery">How to begin</a>
                  {% if prd_faq %}
                    <a title="FAQs" href="#faq">FAQs</a>  
                  {% endif %}
                  {% if prd_review_list %}
                    <a title="Review" href="#review">Review</a> 
                  {% endif %}
                  </div>
                </div>
              </div>
            </section>

            {% if prd_desc %}
                <section class="container-fluid detail-box">
                <div class="container">
                  <div class="row">
                    <div id="course" class="col-sm-12 col-md-8 scroll">
                      <h2>About {{prd_H1}}</h2>
                        {% if prd_video %}
                          <iframe width="100%" height="315" src="https://{{prd_video}}" frameborder="0" allowfullscreen></iframe>
                        {% endif %}
                            {{prd_desc|safe}}
                     </div>
                  </div>
                </div>
              </section>
      
            {% endif %}

            {% if prd_uget %}
      
            <!-- What’ll you get container -->
              <section class="container-fluid detail-box">
                <div class="container">
                  <div class="row">
                    <div id="get" class="col-sm-12 col-md-8 scroll">
                    <h2>What’ll you get</h2>
                        {{prd_uget|safe}}
                   </div>
                  </div>
                </div>      
            </section>
            {% endif %}
              
          {% if prd_service == 'course' %}
            {% include "shop/partials/program_structure.html" %}
          {% endif %}  
          
          {% include "shop/partials/delivery_flow.html" %}
            
          {% include "shop/partials/faq.html" %}

          {% include "shop/partials/reviews.html" %}
    
    
          
      </div>
      </section>
      <!-- main parent2 section end -->      
    {% endblock section2 %}

    {% block prdrecommended %}

    {% include "shop/partials/recommended_product.html" %}
    {% endblock prdrecommended %}
    <!--equiry form-->
<div class="modal fade bs-example-modal-sm3" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" id="detailpage">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
     <div class="request-call call1">
     <div>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h1 class="modal-title" id="myModalLabel">Have a Query</h1>
      </div>
        <form id="callback_form" role="form">
          <div style='display:none'>
            <input type='hidden' name='csrfmiddlewaretoken' value='{{csrf_token}}'/>
          </div>
          <div class="form-group">
            <input type="text" class="form-control" name="name" placeholder="Name">
            <span class="error position-error" style="color:red"></span>
          </div>
          <div class="form-group">
            <div class="country-code">
              <div class="custom-select">
                <select class="form-control" name="country_code">
                  {% for country in country_choices %}
                      <option value="{{country.0}}" {% if country.0 == initial_country %} selected {% endif %} >{{country.1}}</option>
                  {% endfor %}
                </select>
              </div>
              <input type="text" class="form-control" name="mobile" 
              placeholder="Mobile">
              <span class="error position-error" style="color:red"></span>
            </div>
          </div>
          <div class="form-group">
            <textarea class="form-control" rows="1" placeholder="Message" 
            name="message"></textarea>
            <span class="error position-error" style="color:red"></span>
          </div>
          <input type="hidden" name="lead_source" value="2">
          <input type="hidden" name="product" value="{{sqs.pNm}}">
          <button type="button" id="id_callback" class="submit-button">
            Submit
          </button>
        </form>
        <div class="call-service">
          <strong>
            <span class="call-service-icon"></span>
            0124-395 5001
          </strong>
          9am to 7pm ist monday-saturday
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock main_container %}


{% block js_section %}
  {{block.super}} 
  <script src="{% static 'shinelearn/js/cart/cart.js' %}"></script>
    <script src="{% static 'shinelearn/js/common/scroller.js' %}" type="text/javascript"></script>
  
  <script type="text/javascript">
  function LoadMoreProductReview(pv_id) {
      if (processing) {
          return false;
      }
      else{    
        if (pv_id) {
          try{
            let page, elem;
            elem = document.getElementById("id_review_page");
            try {
                elem.value = parseInt(elem.value) + 1;
            } catch (_error) {
              i = _error;
              elem.value = 2;
            }
            page = document.getElementById("id_review_page").value;
            processing = true;
            
            $.ajax({
                url: '/shop/reviews/' + encodeURIComponent(pv_id) + '/?pg=' + encodeURIComponent(page),
                dataType: 'html',
                success: function(html) {
                    $('#loadmorereviewbtn').remove();
                    
                    $('#id_review_list').append(html);
                    
               },
               complete: function(response){
                    return processing = false;
                },
                error: function(xhr, ajaxOptions, thrownError) {
                    alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                }
            });
        }
        catch(e){
          alert("Invalid Page");
        }
        }
      }
    };
    var processing = false;
  

  </script> 

  <script>
    $.validator.addMethod("indiaMobile", function(value, element) {
        var country_code = $("input[name=country_code]").val(); //$('#call_back_country_code-id').val();
        if(country_code == '91'){
            return value.length == 10;
        }
        return true;
    });
    $('#callback_form').validate({
        rules:{
                name:{
                  required: true,
                    maxlength: 80,
                },
                mobile:{
                    required: true,
                    number: true,
                    indiaMobile: true,
                    minlength: 4,
                    maxlength: 15
                },
                message:{
                  required: true,
                  maxlength: 500,
                },
            },
        messages:{
            name:{
              required: "Name is Mandatory.",
                maxlength: "Maximum 80 characters.",
            },
            mobile:{
                required: "Mobile Number is Mandatory",
                number: "Enter only number",
                indiaMobile: "Please enter 10 digits only",
                maxlength: "Please enter less than 16 digits",
                minlength: "Please enter atleast 4 digits"
            },
            
        },
        highlight:function(element, errorClass) {
            $(element).siblings('.error').removeClass('hide_error'); 
        },
        unhighlight:function(element, errorClass) {
            $(element).siblings('.error').addClass('hide_error');    
        },
        errorPlacement: function(error, element){
            $(element).siblings('.error').html(error.text());
        } 
  });

  
  $('#id_callback').click(function(){
    if ( $("#callback_form").valid()) {
      var formData = $("#callback_form").serialize();
      $.ajax({
              url : "/shop/crm/lead/",
              type: "POST",
              data : formData,
              success: function(data, textStatus, jqXHR)
              {
                $("#detailpage").modal('hide');
                alert('Your Query Submitted Successfully.');
                    window.location.reload();
              },
              error: function (jqXHR, textStatus, errorThrown)
              {
                  window.location.reload(); 
              }
          }); 
    }  
    });

      $(document).ready(function() {
      // Configure/customize these variables.
      var showChar = 280;  // How many characters are shown by default
      var ellipsestext = "...";
      var moretext = " know more";
      var lesstext = " know less";
      

      $('.more').each(function() {
          var content = $(this).html();
   
          if(content.length > showChar) {
   
              var c = content.substr(0, showChar);
              var h = content.substr(showChar, content.length - showChar);
   
              var html = c + '<span class="moreellipses">' + ellipsestext+ '&nbsp;</span><span class="morecontent"><span>' + h + '</span>&nbsp;&nbsp;<a href="" class="morelink" style="display:inline-block;">' + moretext + '</a></span>';
   
              $(this).html(html);
          }
   
      });
   
      $(".morelink").click(function(){
          if($(this).hasClass("less")) {
              $(this).removeClass("less");
              $(this).html(moretext);
          } else {
              $(this).addClass("less");
              $(this).html(lesstext);
          }
          $(this).parent().prev().toggle();
          $(this).prev().toggle();
          return false;
      });
  });
    </script> 
    <script type="text/javascript">
      $('.about-tab a').click(function(){
        $('.about-tab a').removeClass('active');
        $(this).addClass('active');
      });
    </script>
{% endblock js_section %}
