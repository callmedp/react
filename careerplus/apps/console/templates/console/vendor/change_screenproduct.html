{% extends "console/base_console.html" %}
{% load static %}
{% load humanize %}
{% load console_tags %}
{% block title %}
  <title>Change Products</title>
{% endblock title %}

{% block css_block %}
  {{ block.super }}
  <!-- Switchery -->
  <link href="{% static "/packages/switchery/dist/switchery.min.css"  %}" rel="stylesheet" type="text/css">
  <link type="text/css" href="{% static 'console/css/myadmin/django-admin-widgets.css' %}" rel="stylesheet">
  
  <!-- ColorSelector -->
  <link href="{% static "/packages/bootstrap-colorselector/dist/bootstrap-colorselector.min.css"  %}" rel="stylesheet" type="text/css">

  <style type="text/css">
      ul.parsley-errors-list {
          list-style: none;
          color: #fff;
          padding-left: 0;
      }
      ul.errorlist {
          list-style: none;
          color: #fff;
          padding-left: 0;
      }
      .empty-form{
        display: none;
      }
      
      </style>
                
{% endblock css_block %}


{% block pagecontent %}
        <!-- page content -->
<div class="right_col" role="main">
  <div class="">
    <div class="page-title">
      <div class="title_left">
        <h3></h3>
      </div>

    </div>
    <div class="clearfix"></div>
    <div class="row top_tiles">
      {% if object.type_product == 1 %}
        <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
          <a class="btn btn-app" href="{% url "console:screenproductvariant-add" object.pk  %}">
            <i class="fa fa-code-fork"></i> Add Product Variants</a>
        </div>
      {% endif %}
      {% if object.status == 2 %}
    
        {% if request.user|has_group:PRODUCT_GROUP_LIST %}
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12" >
              <a class="btn btn-app click-modal" data-msg="live">
                <i class="fa fa-copy"></i> Copy to Live</a>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12" >
              <a class="btn btn-app click-modal"  data-msg="reject">
                <i class="fa fa-ban"></i> Reject Changes</a>
            </div>
              
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12" >
              <a class="btn btn-app click-modal" data-msg="revert">
                <i class="fa fa-backward"></i> Revert Changes</a>
            </div>
            
        {% else %}  
          <div class="row top_tiles">
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
              <a class="btn btn-app click-modal" data-msg="approval">
                <i class="fa fa-paper-plane-o"></i> Send for Approval</a>
            </div>
          </div>
        {% endif %}
      {% else %}
        <div class="row top_tiles">
          <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
            <a class="btn btn-app click-modal" data-msg="approval">
              <i class="fa fa-paper-plane-o"></i> Send for Approval</a>
          </div>
        </div>
    {% endif %}
    </div>

    <form class="form-horizontal form-label-left" method="POST" novalidate id="approval-form">
      {% csrf_token %}
      <input type="hidden" name="screenproduct" value="{{object.pk}}">
      <input type="hidden" name="action" value="">
    </form>
    
    <div id="alertModal" class="modal fade in" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
      <div class="modal-dialog modal-sm">
        <div class="modal-content">

          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span>
            </button>
            <h4 class="modal-title" id="alertModalTitle">Alert!</h4>
          </div>
          <div class="modal-body" id="alertModalBody">
            
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="alertModalOk" data-action="">Ok</button>
          </div>

        </div>
      </div>
    </div>
    <div class="clearfix"></div>



    <div class="row">
      <div class="col-md-12 col-sm-12 col-xs-12">
        {% if messages %}
            {% for message in messages %}

              <div{% if message.tags %} class="alert alert-{{ message.tags }} alert-dismissable"{% endif %}>
              <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>

              {{ message }}
              </div>
            {% endfor %}
        {% endif %}

      </div>
    </div>
    

    <div class="clearfix"></div>

    <div class="row">
      <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel">
          <div class="x_title">
            <h2><i class="fa fa-thumb-tack"></i> Main</h2>
            <ul class="nav navbar-right panel_toolbox">
              <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
              </li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">
               <form class="form-horizontal form-label-left" method="POST" action="." novalidate id="change-product-form">
                    {{form.media}}
                    {% csrf_token %}
                    {% if form.non_field_errors %}
                      <div class="alert alert-danger alert-dismissible fade in" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span>
                        </button>
                        {{form.non_field_errors}}
                      </div>
                    {% endif %}

                    <div class="item form-group">
                      <label class="control-label col-md-2 col-sm-2 col-xs-12" for="">Modified</label>
                      <div class="col-md-7 col-sm-7 col-xs-12">
                        <label style="padding-top:8px;">{{object.modified|naturaltime}}</label>
                      </div>
                    </div>


                    <div class="item form-group {% if form.name.errors %}bad{% endif %}">
                      <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.name.id_for_label }}">Name <span class="required">*</span>
                      </label>
                      <div class="col-md-7 col-sm-7 col-xs-12">
                        {{form.name}}
                      </div>
                      <div class="alert">{{form.name.errors}}</div>
                    </div>

                    <div class="item form-group">
                      <label class="control-label col-md-2 col-sm-2 col-xs-12" for="">Slug</label>
                      <div class="col-md-7 col-sm-7 col-xs-12">
                        <label style="padding-top:8px;">{{object.slug}}</label>
                      </div>
                    </div>

                    <div class="item form-group {% if form.product_class.errors %}bad{% endif %}">
                      <label class="control-label col-md-2 col-sm-2 col-xs-12" for="">Class</label>
                      <div class="col-md-7 col-sm-7 col-xs-12">
                        <label style="padding-top:8px;">{{object.product_class.name}}</label>
                      </div>
                    </div>

                    <div class="item form-group {% if form.type_product.errors %}bad{% endif %}">
                      <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.type_product.id_for_label }}">Type </label>
                      <div class="col-md-7 col-sm-7 col-xs-12">
                        <label style="padding-top:8px;">{{object.get_type}}</label>
                      </div>
                    </div>

                    <div class="item form-group {% if form.upc.errors %}bad{% endif %}">
                      <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.upc.id_for_label }}">UPC <span class="required">*</span>
                      </label>
                      <div class="col-md-7 col-sm-7 col-xs-12">
                        {{form.upc}}
                      </div>
                      <div class="alert">{{form.upc.errors}}</div>
                    </div>

                    
                    <div class="item form-group {% if form.about.errors %}bad{% endif %}">
                      <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.about.id_for_label }}">About <span class="required">*</span>
                      </label>
                      <div class="col-md-7 col-sm-7 col-xs-12">
                        {{form.about}}
                      </div>
                      <div class="alert">{{form.about.errors}}</div>
                    </div>

                    <div class="item form-group {% if form.description.errors %}bad{% endif %}">
                      <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.description.id_for_label }}">Description <span class="required">*</span>
                      </label>
                      <div class="col-md-7 col-sm-7 col-xs-12">
                        {{form.description}}
                      </div>
                      <div class="alert">{{form.description.errors}}</div>
                    </div>

                    <div class="item form-group {% if form.buy_shine.errors %}bad{% endif %}">
                      <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ form.buy_shine.id_for_label }}">What u'll get <span class="required">*</span>
                      </label>
                      <div class="col-md-7 col-sm-7 col-xs-12">
                        {{form.buy_shine}}
                      </div>
                      <div class="alert">{{form.buy_shine.errors}}</div>
                    </div>

                    <input type="hidden" name="product" value="{{object.pk}}">
                    <input type="hidden" name="slug" value="main">
                    
                    <div class="ln_solid"></div>
                    <div class="form-group">
                      <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-3">
                        <button type="submit" class="btn btn-success save_scroll">Submit</button>
                      </div>
                    </div>
                  </form>
                     
          </div>
        </div>
        <div class="x_panel">
          <div class="x_title">
            <h2><i class="fa fa-thumb-tack"></i> Attribute</h2>
            <ul class="nav navbar-right panel_toolbox">
              <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
              </li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">
               <form class="form-horizontal form-label-left" method="POST" action="." novalidate enctype="multipart/form-data" id="change-product-attribute-form">
                  {% csrf_token %}
                    
                    {% if attribute_form.non_field_errors %}
                      <div class="alert alert-danger alert-dismissible fade in" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span>
                        </button>
                        {{attribute_form.non_field_errors}}
                      </div>
                    {% endif %}

                    {% for field in attribute_form %}
                        {% if 'attribute' in field.id_for_label %}
                            {% include "console/vendor/form_field.html" %}
                        {% endif %}
                    {% endfor %}
                    

                    <div class="item form-group {% if attribute_form.comment.errors %}bad{% endif %}">
                      <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ attribute_form.comment.id_for_label }}">Comment <span class="required"></span>
                      </label>
                      <div class="col-md-7 col-sm-7 col-xs-12">
                        {{attribute_form.comment}}
                      </div>
                      <div class="alert" style="margin-left:100px;">{{attribute_form.comment.errors}}</div>
                    </div>

                    <input type="hidden" name="product" value="{{object.pk}}">
                    <input type="hidden" name="slug" value="attribute">
                    <div class="ln_solid"></div>
                    <div class="form-group">
                      <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-3">
                        <button type="submit" class="btn btn-success save_scroll">Submit</button>
                      </div>
                    </div>
                  </form>
              
          </div>
        </div>
        <div class="x_panel">
          <div class="x_title">
            <h2><i class="fa fa-thumb-tack"></i> Program Structure</h2>
            <ul class="nav navbar-right panel_toolbox">
              <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
              </li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">
            <div class="accordion" id="accordion3" role="tablist" aria-multiselectable="true">
                    <form class="form-horizontal form-label-left" method="POST" action="." novalidate enctype="multipart/form-data" id="change-product-faq-form">
                          {% csrf_token %}
                          {{ prdchapter_formset.management_form }}
                      {% if prdchapter_formset.non_form_errors %}
                        <div class="alert alert-danger alert-dismissible fade in" role="alert">
                          <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span>
                          </button>
                          {{ prdchapter_formset.non_form_errors }}
                        </div>
                      {% endif %}
                    <div class="inter-related-parent-div">    
                    {% for inline_admin_form in prdchapter_formset.forms %}
                    <div class="panel {% if forloop.last %} {% endif %}">
                      <a class="panel-heading {% if not inline_admin_form.errors %}collapsed{% endif %}" role="tab" id="heading3{{forloop.counter}}" data-toggle="collapse" data-parent="#accordion3" href="#collapse3{{forloop.counter}}" aria-expanded="false" aria-controls="collapse3{{forloop.counter}}">
                        {% if  inline_admin_form|get_instance %}
                        <h4 class="panel-title">{{inline_admin_form|get_instance}}</h4>

                        {% else %}
                        <h4 class="panel-title">Add New
                        </h4>{% endif %}

                          
                      </a>
                      <div id="collapse3{{forloop.counter}}" class="panel-collapse collapse {% if  inline_admin_form.errors %}in{% endif %}" role="tabpanel" aria-labelledby="heading3{{forloop.counter}}" {% if inline_admin_form.errors %}aria-expanded="true"{% else %}aria-expanded="false" style="height: 0px;"{% endif %}>
                        <div class="panel-body">
                            {% if  inline_admin_form.DELETE %}
                              <div class="pull-left">
                                {{inline_admin_form.DELETE}}<label for="{{ inline_admin_form.DELETE.id_for_label }}" style="color:#d9534f !important;">&nbsp;&nbsp;Delete
                                </label>
                                
                              </div>
                              </br>
                                <div class="clearfix"></div>
                            {% endif %}

                            {% for hidden in inline_admin_form.hidden_fields %}
                                {{ hidden }}
                            {% endfor %}
                        
                          <div class="item form-group {% if inline_admin_form.heading.errors %}bad{% endif %}">
                            <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ inline_admin_form.heading.id_for_label }}">Heading <span class="required">*</span>
                            </label>
                            <div class="col-md-7 col-sm-7 col-xs-12">
                              {{inline_admin_form.heading}}
                            </div>
                            <div class="alert">{{inline_admin_form.heading.errors}}</div>
                          </div>
                          <div class="item form-group {% if inline_admin_form.answer.errors %}bad{% endif %}">
                            <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ inline_admin_form.answer.id_for_label }}">Content <span class="required"></span>
                            </label>
                            <div class="col-md-7 col-sm-7 col-xs-12">
                              {{inline_admin_form.answer}}
                            </div>
                            <div class="alert">{{inline_admin_form.answer.errors}}</div>
                          </div>
                          
                          <div class="item form-group {% if inline_admin_form.status.errors %}bad{% endif %}">
                            <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ inline_admin_form.status.id_for_label }}">Active <span class="required"></span>
                            </label>
                            <div class="col-md-7 col-sm-7 col-xs-12">
                              {{inline_admin_form.status}}
                            </div>
                            <div class="alert">{{inline_admin_form.status.errors}}</div>
                          </div>
                          
                          <div class="item form-group {% if inline_admin_form.ordering.errors %}bad{% endif %}">
                            <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ inline_admin_form.ordering.id_for_label }}">Sort Order <span class="required"></span>
                            </label>
                            <div class="col-md-7 col-sm-7 col-xs-12">
                              {{inline_admin_form.ordering}}
                            </div>
                            <div class="alert">{{inline_admin_form.ordering.errors}}</div>
                          </div>
                          

                        </div>
                      </div>
                    </div>
                    {% endfor %}
                    </div>
                   

                    <input type="hidden" name="product" value="{{object.pk}}">
                      <input type="hidden" name="slug" value="chapter">
                      <div class="ln_solid"></div>
                      <div class="form-group">
                        <div class="col-md-9 col-sm-9 col-xs-9 col-md-offset-3">
                          <button type="submit" class="btn btn-success save_scroll">Submit</button>
                        </div>
                      </div>
                    
                    </form>
                  </div>  
          </div>
        </div>
        
        <div class="x_panel">
          <div class="x_title">
            <h2><i class="fa fa-thumb-tack"></i>Available Countries</h2>
            <ul class="nav navbar-right panel_toolbox">
              <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
              </li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">
              <form class="form-horizontal form-label-left" method="POST" action="." novalidate id="change-product-country-form">
                {{country_form.media}}
                {% csrf_token %}
                  
                  {% if country_form.non_field_errors %}
                    <div class="alert alert-danger alert-dismissible fade in" role="alert">
                      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span>
                      </button>
                      {{country_form.non_field_errors}}
                    </div>
                  {% endif %}

                  <div class="item form-group {% if country_form.countries.errors %}bad{% endif %}">
                    <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ country_form.countries.id_for_label }}">Countries Visible <span class="required"></span>
                    </label>
                    <div class="col-md-7 col-sm-7 col-xs-12">
                      {{country_form.countries}}
                    </div>
                    <div class="alert" >{{country_form.countries.errors}}</div>
                  </div>
                  
                  
                  <input type="hidden" name="product" value="{{object.pk}}">
                  <input type="hidden" name="slug" value="country">
                  <div class="ln_solid"></div>
                  <div class="form-group">
                    <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-3">
                      <button type="submit" class="btn btn-success save_scroll">Submit</button>
                    </div>
                  </div>
                </form>
         
          </div>
        </div>
        <div class="x_panel">
          <div class="x_title">
            <h2><i class="fa fa-thumb-tack"></i>Prices</h2>
            <ul class="nav navbar-right panel_toolbox">
              <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
              </li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">
              <form class="form-horizontal form-label-left" method="POST" action="." novalidate id="change-product-price-form">
                {{price_form.media}}
                {% csrf_token %}
                <p>Products prices is dependent on visible countries. Please make sure to add prices on change of existing countries.
                </p>
                
                {% if price_form.non_field_errors %}
                  <div class="alert alert-danger alert-dismissible fade in" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span>
                    </button>
                    {{price_form.non_field_errors}}
                  </div>
                {% endif %}

                <div class="item form-group {% if price_form.inr_price.errors %}bad{% endif %}">
                  <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ price_form.inr_price.id_for_label }}">(<i class="fa fa-inr"></i>)&nbsp;INR Price&nbsp;<span class="required">*</span>
                  </label>
                  <div class="col-md-7 col-sm-7 col-xs-12">
                    {{price_form.inr_price}}
                  </div>
                  <div class="alert">{{price_form.inr_price.errors}}</div>
                </div>
                <div class="item form-group {% if price_form.fake_inr_price.errors %}bad{% endif %}">
                  <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ price_form.fake_inr_price.id_for_label }}">(<i class="fa fa-inr"></i>)&nbsp;Fake INR Price&nbsp;<span class="required"></span>
                  </label>
                  <div class="col-md-7 col-sm-7 col-xs-12">
                    {{price_form.fake_inr_price}}
                  </div>
                  <div class="alert">{{price_form.fake_inr_price.errors}}</div>
                </div>

                <div class="item form-group {% if price_form.usd_price.errors %}bad{% endif %}">
                  <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ price_form.usd_price.id_for_label }}">(<i class="fa fa-usd"></i>)&nbsp;USD Price&nbsp; <span class="required"></span>
                  </label>
                  <div class="col-md-7 col-sm-7 col-xs-12">
                    {{price_form.usd_price}}
                  </div>
                  <div class="alert">{{price_form.usd_price.errors}}</div>
                </div>
                <div class="item form-group {% if price_form.fake_usd_price.errors %}bad{% endif %}">
                  <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ price_form.fake_usd_price.id_for_label }}">(<i class="fa fa-usd"></i>)&nbsp;Fake USD Price&nbsp;<span class="required"></span>
                  </label>
                  <div class="col-md-7 col-sm-7 col-xs-12">
                    {{price_form.fake_usd_price}}
                  </div>
                  <div class="alert">{{price_form.fake_usd_price.errors}}</div>
                </div>

                <div class="item form-group {% if price_form.aed_price.errors %}bad{% endif %}">
                  <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ price_form.aed_price.id_for_label }}">(<i class="fa fa-money"></i>)&nbsp;AED Price&nbsp;<span class="required"></span>
                  </label>
                  <div class="col-md-7 col-sm-7 col-xs-12">
                    {{price_form.aed_price}}
                  </div>
                  <div class="alert">{{price_form.aed_price.errors}}</div>
                </div>
                <div class="item form-group {% if price_form.fake_aed_price.errors %}bad{% endif %}">
                  <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ price_form.fake_aed_price.id_for_label }}">(<i class="fa fa-money"></i>)&nbsp;Fake AED Price&nbsp;<span class="required"></span>
                  </label>
                  <div class="col-md-7 col-sm-7 col-xs-12">
                    {{price_form.fake_aed_price}}
                  </div>
                  <div class="alert">{{price_form.fake_aed_price.errors}}</div>
                </div>

                <div class="item form-group {% if price_form.gbp_price.errors %}bad{% endif %}">
                  <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ price_form.gbp_price.id_for_label }}">(<i class="fa fa-gbp"></i>)&nbsp;GBP Price&nbsp;<span class="required"></span>
                  </label>
                  <div class="col-md-7 col-sm-7 col-xs-12">
                    {{price_form.gbp_price}}
                  </div>
                  <div class="alert">{{price_form.gbp_price.errors}}</div>
                </div>
                <div class="item form-group {% if price_form.fake_gbp_price.errors %}bad{% endif %}">
                  <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ price_form.fake_gbp_price.id_for_label }}">(<i class="fa fa-gbp"></i>)&nbsp;Fake GBP Price&nbsp;<span class="required"></span>
                  </label>
                  <div class="col-md-7 col-sm-7 col-xs-12">
                    {{price_form.fake_gbp_price}}
                  </div>
                  <div class="alert">{{price_form.fake_gbp_price.errors}}</div>
                </div>

                <input type="hidden" name="product" value="{{object.pk}}">
                <input type="hidden" name="slug" value="price">
                <div class="ln_solid"></div>
                <div class="form-group">
                  <div class="col-md-9 col-sm-9 col-xs-12 col-md-offset-3">
                    <button type="submit" class="btn btn-success save_scroll">Submit</button>
                  </div>
                </div>
                </form>
              
          </div>
        </div>
        {% if object.type_product == 1 %}
        {% if prdvars_formset.forms %}
            
          <div class="x_panel">
          <div class="x_title">
            <h2><i class="fa fa-thumb-tack"></i>Variations</h2>
            <ul class="nav navbar-right panel_toolbox">
              <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
              </li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">
                <div class="accordion" id="accordion1" role="tablist" aria-multiselectable="true">
                  <form class="form-horizontal form-label-left" method="POST" action="." novalidate enctype="multipart/form-data" id="change-product-price-form">
                        {% csrf_token %}
                        {{ prdvars_formset.management_form }}
                    {% if prdvars_formset.non_form_errors %}
                      <div class="alert alert-danger alert-dismissible fade in" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span>
                        </button>
                        {{ prdvars_formset.non_form_errors }}
                      </div>
                    {% endif %}
                  <div class="inter-related-parent-div">    
                  {% for inline_admin_form in prdvars_formset.forms %}
                  <div class="panel {% if forloop.last %} {% endif %}">
                    <a class="panel-heading {% if not inline_admin_form.errors %}collapsed{% endif %}" role="tab" id="heading1{{forloop.counter}}" data-toggle="collapse" data-parent="#accordion1" href="#collapse1{{forloop.counter}}" aria-expanded="false" aria-controls="collapse1{{forloop.counter}}">
                      {% if  inline_admin_form|get_instance %}
                      <h4 class="panel-title">Variation Product:&nbsp;{{inline_admin_form|get_instance}}</h4>

                      {% endif %}

                        
                    </a>
                    <div id="collapse1{{forloop.counter}}" class="panel-collapse collapse {% if inline_admin_form.errors %}in{% endif %}" role="tabpanel" aria-labelledby="heading1{{forloop.counter}}" {% if inline_admin_form.errors %}aria-expanded="true"{% else %}aria-expanded="false" style="height: 0px;"{% endif %}>
                      <div class="panel-body">
                            <div class="pull-left">
                              <a href="{{inline_admin_form|get_edit_url}}" class="btn btn-info btn-xs"><i class="fa fa-pencil"></i> Edit </a>
                              
                            </div>
                            </br>
                            <div class="clearfix"></div>
                          {% if  inline_admin_form.DELETE %}
                            <div class="pull-left">
                              {{inline_admin_form.DELETE}}<label for="{{ inline_admin_form.DELETE.id_for_label }}" style="color:#d9534f !important;">&nbsp;&nbsp;Delete
                              </label>
                              
                            </div>
                            </br>
                              <div class="clearfix"></div>
                          {% endif %}

                          {% for hidden in inline_admin_form.hidden_fields %}
                              {{ hidden }}
                          {% endfor %}
                      
                        <div class="item form-group {% if inline_admin_form.active.errors %}bad{% endif %}">
                          <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ inline_admin_form.active.id_for_label }}">Active <span class="required"></span>
                          </label>
                          <div class="col-md-7 col-sm-7 col-xs-12">
                            {{inline_admin_form.active}}
                          </div>
                          <div class="alert">{{inline_admin_form.active.errors}}</div>
                        </div>
                        
                        <div class="item form-group {% if inline_admin_form.sort_order.errors %}bad{% endif %}">
                          <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ inline_admin_form.sort_order.id_for_label }}">Sort Order <span class="required"></span>
                          </label>
                          <div class="col-md-7 col-sm-7 col-xs-12">
                            {{inline_admin_form.sort_order}}
                          </div>
                          <div class="alert">{{inline_admin_form.sort_order.errors}}</div>
                        </div>
                        
                        
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                  </div>
                 

                    <input type="hidden" name="product" value="{{object.pk}}">
                    <input type="hidden" name="slug" value="vars">
                    <div class="ln_solid"></div>
                    <div class="form-group">
                      <div class="col-md-9 col-sm-9 col-xs-9 col-md-offset-3">
                        <button type="submit" class="btn btn-success save_scroll">Submit</button>
                      </div>
                    </div>
                  
                  </form>
                </div>  
          </div>
        </div>
        {% endif %}       
        
        {%endif %}
        <div class="x_panel">
          <div class="x_title">
            <h2><i class="fa fa-thumb-tack"></i> FAQ</h2>
            <ul class="nav navbar-right panel_toolbox">
              <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
              </li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">
            <div class="accordion" id="accordion2" role="tablist" aria-multiselectable="true">
                    <form class="form-horizontal form-label-left" method="POST" action="." novalidate enctype="multipart/form-data" id="change-product-faq-form">
                          {% csrf_token %}
                          {{ prdfaq_formset.management_form }}
                      {% if prdfaq_formset.non_form_errors %}
                        <div class="alert alert-danger alert-dismissible fade in" role="alert">
                          <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span>
                          </button>
                          {{ prdfaq_formset.non_form_errors }}
                        </div>
                      {% endif %}
                    <div class="inter-related-parent-div">    
                    {% for inline_admin_form in prdfaq_formset.forms %}
                    <div class="panel ">
                      <a class="panel-heading {% if not inline_admin_form.errors %}collapsed{% endif %}" role="tab" id="heading2{{forloop.counter}}" data-toggle="collapse" data-parent="#accordion2" href="#collapse2{{forloop.counter}}" {% if inline_admin_form.errors %}aria-expanded="true"{% else %}aria-expanded="false"{% endif %} aria-controls="collapse2{{forloop.counter}}">
                        {% if  inline_admin_form|get_instance %}
                        <h4 class="panel-title">FAQ:&nbsp;{{inline_admin_form|get_instance}}</h4>

                        {% else %}
                        <h4 class="panel-title">FAQ: Add New
                        </h4>{% endif %}

                          
                      </a>
                      <div id="collapse2{{forloop.counter}}" class="panel-collapse collapse
                      {% if inline_admin_form.errors %}in{% endif %}" 
                      {% if inline_admin_form.errors %}aria-expanded="true"{% else %}aria-expanded="false" style="height: 0px;"{% endif %}
                      role="tabpanel" aria-labelledby="heading2{{forloop.counter}}" >
                        <div class="panel-body">
                            {% if  inline_admin_form.DELETE %}
                              <div class="pull-left">
                                {{inline_admin_form.DELETE}}<label for="{{ inline_admin_form.DELETE.id_for_label }}" style="color:#d9534f !important;">&nbsp;&nbsp;Delete
                                </label>
                                
                              </div>
                              </br>
                                <div class="clearfix"></div>
                            {% endif %}

                            {% for hidden in inline_admin_form.hidden_fields %}
                                {{ hidden }}
                            {% endfor %}
                        
                            <div class="item form-group {% if inline_admin_form.question.errors %}bad{% endif %}">
                            <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ inline_admin_form.question.id_for_label }}">Question <span class="required">*</span>
                            </label>
                            <div class="col-md-7 col-sm-7 col-xs-12">
                              {{inline_admin_form.question}}
                            </div>
                            <div class="alert">{{inline_admin_form.question.errors}}</div>
                          </div>
                          
                          <div class="item form-group {% if inline_admin_form.active.errors %}bad{% endif %}">
                            <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ inline_admin_form.active.id_for_label }}">Active <span class="required"></span>
                            </label>
                            <div class="col-md-7 col-sm-7 col-xs-12">
                              {{inline_admin_form.active}}
                            </div>
                            <div class="alert">{{inline_admin_form.active.errors}}</div>
                          </div>
                          
                          <div class="item form-group {% if inline_admin_form.question_order.errors %}bad{% endif %}">
                            <label class="control-label col-md-2 col-sm-2 col-xs-12" for="{{ inline_admin_form.question_order.id_for_label }}">Sort Order <span class="required"></span>
                            </label>
                            <div class="col-md-7 col-sm-7 col-xs-12">
                              {{inline_admin_form.question_order}}
                            </div>
                            <div class="alert">{{inline_admin_form.question_order.errors}}</div>
                          </div>
                          

                        </div>
                      </div>
                    </div>
                    {% endfor %}
                    </div>
                   

                    <input type="hidden" name="product" value="{{object.pk}}">
                      <input type="hidden" name="slug" value="faqs">
                      <div class="ln_solid"></div>
                      <div class="form-group">
                        <div class="col-md-9 col-sm-9 col-xs-9 col-md-offset-3">
                          <button type="submit" class="btn btn-success save_scroll">Submit</button>
                        </div>
                      </div>
                    
                    </form>
                  </div>  
          </div>
        </div>
        
      </div>
    </div>
    

    
  </div>
</div>
        <!-- /page content -->
{% endblock pagecontent %}

        
{% block js_block %}
  {{ block.super }}
      <!-- Parsley Validate Scripts -->
      <script type="text/javascript" src="{% static "packages/parsleyjs/parsley.min.js" %}"></script>
      <script src="{% static 'console/js/myadmin/django-admin.multiselect.js' %}"></script>
    <script type="text/javascript">
        jQuery.each($("select[multiple]"), function () {
          // "Locations" can be any label you want
          SelectFilter.init(this.id, this.name, 0, "/media/");
         });
    </script>
  
    
      <!-- Switchery -->
      <script type="text/javascript" src="{% static "packages/switchery/dist/switchery.min.js" %}"></script>
    

      <!-- Custom Theme Scripts -->
      <script type="text/javascript" src="{% static "console/js/shop/console_shop.js" %}"></script>
      <script>
        

       $(document).ready(function() {
          $('.click-modal').click(function(){
            let msg = $(this).data("msg");
            $("#alertModalOk").data("action", msg);
            if (msg == "approval"){
              let message = 'Please make sure you have saved your changes. Do you wish to send this for approval?';
              $("#alertModal").modal('show').find('#alertModalBody').html(message);
            }
            else if(msg == "revert"){
              let message = 'Do you want to revert all changes?';
              $("#alertModal").modal('show').find('#alertModalBody').html(message);
            }
            else if(msg == "live"){
              let message = 'Do you want to copy data to live?';
              $("#alertModal").modal('show').find('#alertModalBody').html(message);
            }
            else if(msg == "reject"){
              let message = 'Do you reject the changes?';
              $("#alertModal").modal('show').find('#alertModalBody').html(message);
            }
             
          });
          var processing = true;
          $('#alertModalOk').click(function(){
            let msg = $(this).data("action");
            let form = $('#approval-form');
            let action = form.find("input[name='action']");
            action.val(msg);
            if (processing){
              processing = false;
            $.ajax({
              url: '/console/screenproduct/action/' + msg +'/',
              type: 'post',
              data: form.serialize(),
              dataType: 'json',
              success: function(json) {
                  processing = false;
                  if (json['error']) {
                    window.location.reload();
                  }
                  if (json['success']) {
                    window.location.href = json['next_url'];
                  }
              },
              failure: function(response){
                  alert("Something went wrong, Please try again")
                  processing = true;
              },
              error: function(xhr, ajaxOptions, thrownError) {
                  alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                  processing = true;
              }
            });
          }else{
            $("#alertModal").find('#alertModalBody').html("One request is already processing");
          };
          });


        });
    </script>          

{% endblock js_block %}
