{% load static custom_filters %}
{% for result in page.object_list %}
    <li class="box-panel" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
        <meta itemprop="position" content="{{forloop.counter}}" />
        <a itemprop="url" title="{{ result.pHd|default:result.pNm }}" href="{{ result.pURL }}" target="_blank">
        <div class="media">
            <div class="media-left">
                <figure>
                  <img loading="lazy" aria-label="{{ result.pImA|title }}" class="media-object" src="{{ result.pImg}}" alt="{{ result.pImA|title }}">
                </figure>
            </div>
          <div class="media-body">
            <div class="certification-jobs-box">
              {% if "true" in result.pCert %}<span class="certification-jobs"><figure class="certification-icon"></figure> Certification</span>{% endif %}
              {% if result.pNJ %}<span class="certification-jobs"><figure class="jobs-icon"></figure> <span class="jobs-number">{{ result.pNJ }}</span> jobs available</span>{% endif %}
            </div>

            <h3 class="listing-heading" itemprop="name">{{ result.pHd|default:result.pNm }}</h3>

            <div class="rating-review-box">
                {% if result.pRC %}
                {% for star in result.pStar %}
                <figure {% if star == '*' %}class="full-star"{% elif star == '+'%}class="half-star"{% else %}class="blank-star"{% endif %}></figure>
                {% endfor %}
                <strong>{{ result.pARx|floatformat }}/5</strong> | {{ result.pRC }} ratings
                {% else %}
                    <strong>{{ result.pBC|default:"10" }}</strong> people bought
                {% endif %}
                {% comment %}
                <meta itemprop="ratingValue" content="{{ result.pARx|floatformat }}">
                <meta itemprop="reviewCount" content="{% if result.pRC > 0 %}
                {{result.pRC}}
                {% else %}
                  1      
                {% endif %}">
                {% endcomment %}
            </div>

            <div class="providers">
               Provider
               <span>{{ result.pPvn|title }}</span>
            </div>
            {% with result.pCmbs|jsonify as combos %}
                {% if combos.combo %}
                    <div class="providers">
                       Includes
                       {% for combo in combos.combo_list %}
                         <span>
                          {% if combo.heading %}
                            {{ combo.heading }}
                          {% else %}
                            {{ combo.name }}
                          {% endif %}
                       </span>
                     {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
            <div class="pricing-box">
               Starting at <strong>Rs. {{ result.pPin |floatformat:'0' }}/-</strong>{% if result.pPfin|floatformat:0|add:"0" %}<strike>Rs. {{ result.pPfin|floatformat:"0" }}/-</strike> <span class="discount">{{ result.discount }}% OFF</span>{% endif %}
            </div>
          </div>
        </div>
      </a>
    </li>
{% endfor %}