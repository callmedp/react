{% extends "mobile/basic/base.html" %}
{% load thumbnail %}
{% load static compress %}


{% block canonical_url %}
    <link rel="canonical" href="{{ request.build_absolute_uri }}">
{% endblock canonical_url %}

{% block title %}Cart | Shine learning{% endblock %}

{% block css_section %}
    {{ block.super }}
    {% compress css %}
        <link type="text/scss" href="{% static 'shinelearn/css/mobile/common/checkbox.scss' %}" rel="stylesheet">
        <link type="text/scss" href="{% static 'shinelearn/css/mobile/dashboard/dashboard.scss' %}" rel="stylesheet">
    {% endcompress %}
    
{% endblock css_section %}

{% block header %}

    <!-- header menu Icon Starts here -->
    <header class="w100fl he-auto">
        <!-- header menu Icon Starts here -->
        <div class="main-menu w100fl">
            <div class="pull-left">
                <a class="icon-back pull-left" role="button" onclick="goBack()"></a> 
            </div><!-- / Left side Icon ends here -->

            <div class="pull-right">
                
                <!--a class=" pull-left" href="#">search</a-->
                
                <a class=" pull-left" href="{% url "cart:cart-product-list" %}">cart</a>
            </div><!-- / Right side Icon ends here -->
        </div><!-- header menu Icon ends here -->

        <h1 class="heading-back w100fl pb-0">My Cart</h1>

    </header><!-- header ends here -->

{% endblock header %}

{% block container %}

{% if cart_items %}
<div class="body-wrapper mb-50">

    <div class="content-box">
        <!-- Tab content Satrts here -->
        <div class="my-cart">
            <ul>
                {% for item in cart_items %}
                    <!-- item 1 -->
                    {% with addons=item.addons variations=item.variations delivery_types=item.delivery_types %}
                        {% if item.product_class == 'course' and variations %}
                            <li class="box row">
                                <form role="form" method="post" id="cart_remove_form{{item.id}}">{% csrf_token %}
                                <div class="table{% if not item.is_available %} disbale{% endif %}">
                                    <div class="table-cell">
                                        <strong class="c6">{{item.name}}</strong>
                                        <p class="c9 fs-12">Provided by <a href="#">{{item.vendor}}</a></p>
                                    </div><!-- /.table cell -->

                                    <div class="fs-13 c6 bold table-cell text-right">
                                        <p>Rs. {{variations.0.price}}/-</p>
                                        {% if not item.is_available %}
                                            <p class="pb-0 red-text">Not available</p>
                                        {% endif %}
                                    </div><!-- /.table cell -->
                                </div><!-- /.table -->

                                {% if addons %}
                                    <div class="addons">
                                        <h4>Addons</h4>
                                        <ul class="mt-10 fs-12 c6">
                                            {% for addon in addons %}
                                                <li class="{% if not addon.is_available %}disbale{% endif %}">
                                                    <span>
                                                        <input type="checkbox" id="addon-{{addon.id}}" name="child_list" value="{{addon.reference}}">
                                                        <label for="addon-{{addon.id}}">{{addon.name}}
                                                        </label>
                                                    </span>

                                                    <span>Rs. {{addon.price}}/-</span>
                                                </li>
                                                {% if not addon.is_available %}
                                                    <p class="pb-0 red-text text-right mt-sub-10">Not available</p>
                                                {% endif %}
                                            {% endfor %}
                                        </ul>
                                    </div>
                                {% endif %}

                                {% if delivery_types %}
                                    <div class="table">
                                        <div class="table-cell">
                                            <div class="">
                                                <!--form role="form" id="delivery-option-form{{variations.0.id}}">{% csrf_token %} -->
                                                    <select id="delivery-option{{variations.0.id}}" onchange="deliveryOptionUpdate('{{variations.0.id}}')" name="delivery_type">
                                                        {% for d_obj in delivery_types %}
                                                            <option value="{{d_obj.id}}" delivery-price="{{d_obj.get_price}}" {% if d_obj == variations.0.delivery_obj %}selected{% endif %}>{{d_obj.name}}</option>
                                                        {% endfor %}
                                                        <!--option>Select shipping</option>
                                                        <option>Fedx</option>
                                                        <option>UPSC</option>
                                                        <option>DHL</option>
                                                        <option>DTDC</option-->
                                                    </select>
                                                    <input type="hidden" name="lineid" value="{{variations.0.id}}" />
                                                <!--/form-->
                                            </div>
                                        </div><!-- /.table cell -->

                                        <div class="table-cell text-right">
                                            <span class="mt-15" id="delivery-charge{{variations.0.id}}">{% if variations.0.delivery_obj and variations.0.delivery_obj.get_price %}Rs. {{variations.0.delivery_obj.get_price|floatformat:0}}/-{% endif %}</span>
                                        </div><!-- /.table cell -->
                                    </div><!-- /.table -->
                                {% endif %}

                                <div class="table">
                                    <div class="table-cell">
                                    </div><!-- /.table cell -->
                                    <input type="hidden" name="product_reference" value="{{variations.0.reference}}">

                                    <div class="table-cell text-right">
                                        <button type="button" class="btn btn-sm btn-outline mt-20" onclick="removeFromCartMobile('{{item.id}}')">Remove</button>
                                    </div><!-- /.table cell -->
                                </div><!-- /.table -->
                                </form>

                            </li><!-- /.li -->
                        {% else %}

                            <li class="box row">
                                <form role="form" method="post" id="cart_remove_form{{item.id}}">{% csrf_token %}
                               
                                <div class="table{% if not item.is_available %} disbale{% endif %}">
                                    <div class="table-cell">
                                        <strong class="c6">{{item.name}}</strong>
                                        <p class="c9 fs-12">Provided by <a href="#">{{item.vendor}}</a></p>
                                    </div><!-- /.table cell -->

                                    <div class="fs-13 c6 bold table-cell text-right">
                                        <p>Rs. {{item.price}}/-</p>
                                        {% if not item.is_available %}
                                            <p class="pb-0 red-text">Not available</p>
                                        {% endif %}
                                    </div><!-- /.table cell -->
                                </div><!-- /.table -->

                                {% if addons or variations %}
                                    <div class="addons">
                                        <h4>Addons</h4>
                                        <ul class="mt-10 fs-12 c6">
                                            {% for var in variations %}
                                                <li class="{% if not var.is_available %}disbale{% endif %}">
                                                    <span>
                                                        <input type="checkbox" name="child_list" id="var-{{var.id}}" value="{{var.reference}}">
                                                        <label for="var-{{var.id}}">{{var.name}}
                                                        </label>
                                                    </span>
                                                    <span>Rs. {{var.price}}/-</span>
                                                </li>
                                                {% if not var.is_available %}
                                                    <p class="pb-0 red-text text-right mt-sub-10">Not available</p>
                                                {% endif %}
                                            {% endfor %}

                                            {% for addon in addons %}
                                                <li class="{% if not addon.is_available %}disbale{% endif %}">
                                                    <span>
                                                        <input type="checkbox" name="child_list" id="addon-{{addon.id}}" value="{{addon.reference}}">
                                                        <label for="addon-{{addon.id}}">{{addon.name}}
                                                        </label>
                                                    </span>
                                                    <span>Rs. {{addon.price}}/-</span>
                                                </li>
                                                {% if not addon.is_available %}
                                                    <p class="pb-0 red-text text-right mt-sub-10">Not available</p>
                                                {% endif %}
                                            {% endfor %}
                                        </ul>
                                    </div>
                                {% endif %}

                                {% if delivery_types %}
                                    <div class="table">
                                        <div class="table-cell">
                                            <div class="">
                                                <!--form role="form" id="delivery-option-form{{item.id}}">{% csrf_token %} -->
                                                    <select id="delivery-option{{item.id}}" onchange="deliveryOptionUpdate('{{item.id}}')" name="delivery_type">
                                                        {% for d_obj in delivery_types %}
                                                            <option value="{{d_obj.id}}" delivery-price="{{d_obj.get_price}}" {% if d_obj == item.delivery_obj %}selected{% endif %}>{{d_obj.name}}</option>
                                                        {% endfor %}
                                                        <!--option>Select shipping</option>
                                                        <option>Fedx</option>
                                                        <option>UPSC</option>
                                                        <option>DHL</option>
                                                        <option>DTDC</option-->
                                                    </select>
                                                    <input type="hidden" name="lineid" value="{{item.id}}" />
                                                <!--/form-->
                                            </div>
                                        </div><!-- /.table cell -->

                                        <div class="table-cell text-right">
                                            <span class="mt-15" id="delivery-charge{{item.id}}">{% if item.delivery_obj and item.delivery_obj.get_price %}Rs. {{item.delivery_obj.get_price|floatformat:0}}/-{% endif %}</span>
                                        </div><!-- /.table cell -->
                                    </div><!-- /.table -->
                                {% endif %}


                                <div class="table">
                                    <div class="table-cell">
                                    </div><!-- /.table cell -->
                                     <input type="hidden" name="product_reference" value="{{item.reference}}">

                                    <div class="table-cell text-right">
                                        <button type="button" class="btn btn-sm btn-outline mt-20" onclick="removeFromCartMobile('{{item.id}}')">Remove</button>
                                    </div><!-- /.table cell -->
                                </div><!-- /.table -->
                              </form>

                            </li><!-- /.li -->
                        {% endif %}
                    {% endwith %}
                {% endfor %}

                {% comment %}
                <li class="box row">
                    <div class="table">
                        <div class="table-cell">
                            <strong class="c6">Resume writing</strong>
                            <p class="c9 fs-12 pb-0">Provided by <a href="#">Shine Learning</a></p>
                        </div><!-- /.table cell -->

                        <div class="fs-13 c6 bold table-cell text-right">
                            <p class="pb-0">Rs. 6299/-</p>
                        </div><!-- /.table cell -->
                    </div><!-- /.table -->

                    <div class="addons">
                        <h4>Addons</h4>
                        <ul class="mt-10 fs-12 c6">
                            <li>
                                <span>
                                    <input type="checkbox" id="addon-1 ">
                                    <label for="addon-1 ">Cover letter
                                    </label>
                                </span>

                                <span>Rs. 599/-</span>
                            </li>

                            <li>
                                <span>
                                    <input type="checkbox" id="addon-2 ">
                                    <label for="addon-2 ">Australia
                                    </label>
                                </span>

                                <span>Rs. 2099/-</span>
                            </li>

                            <p class="pb-0 red-text text-right mt-sub-10">Not available</p>

                            <li>
                                <span>
                                    <input type="checkbox" id="addon-3 ">
                                    <label for="addon-3 ">Resume+
                                    </label>
                                </span>

                                <span>Rs. 1099/-</span>
                            </li>
                        </ul>
                    </div>

                    <div class="table">
                        <div class="table-cell">
                            <div class="">
                              <select>
                                <option>Select shipping</option>
                                <option>Fedx</option>
                                <option>UPSC</option>
                                <option>DHL</option>
                                <option>DTDC</option>
                              </select>
                            </div>
                        </div><!-- /.table cell -->

                        <div class="table-cell text-right">
                            <span class="mt-15">Rs. 599/-</span>
                        </div><!-- /.table cell -->
                    </div><!-- /.table -->



                    <div class="table">
                        <div class="table-cell">
                        </div><!-- /.table cell -->

                        <div class="table-cell text-right">
                            <button class="btn btn-sm btn-outline mt-20">Remove</button>
                        </div><!-- /.table cell -->
                    </div><!-- /.table -->
                </li><!-- /.li -->

                <li class="box row">
                    <div class="table disbale">
                        <div class="table-cell">
                            <strong class="c6">English learning</strong>
                            <p class="c9 fs-12">Provided by <a href="#">Vskills</a></p>
                        </div><!-- /.table cell -->

                        <div class="fs-13 c6 bold table-cell text-right">
                            <p class="pb-0">Rs. 7499/--</p>
                            <p class="pb-0 red-text">Not available</p>
                        </div><!-- /.table cell -->
                    </div><!-- /.table -->


                    <div class="table">
                        <div class="table-cell">
                        </div><!-- /.table cell -->

                        <div class="table-cell text-right">
                            <button class="btn btn-sm btn-outline mt-20">Remove</button>
                        </div><!-- /.table cell -->
                    </div><!-- /.table -->
                </li><!-- /.li -->

                {% endcomment %}

                <li class="text-center"><img src="{% static 'shinelearn/images/mobile/common/secure-payment.jpg' %}"></li>
            </ul><!-- /.ul -->
        </div><!-- Tab content ends here -->

    </div><!-- /. content box -->

    <!-- call us and chat widget starts here -->
    <div class="stick_bottom call-us">
        <div class="content-box">
            <div class="wf100">
                <div class="pull-left">
                    <p class="c9 fs-12 pb-0">Payable Amount</p>
                    <span class="fs-22 c3" >Rs. <span id="total-cart-amount-id">{{total_amount}}</span>/-</span>
                </div>
                <a href="{% url "cart:payment-login" %}" class="btn btn-orange pull-right">Proceed to checkout</a>
            </div>
        <div class="clearfix"></div>   
        </div>
    </div><!-- call us and chat widget ends here -->
</div>
{% else %}
    <div class="body-wrapper">
        <div class="content-box">
            <div class="text-center mt-50">
                <span class="inline-block"><img src="{% static 'shinelearn/images/mobile/common/wallet_empty.jpg' %}" alt="empty-image"></span>
                <p class="fs-18 c6 mt-10">You have no product in your cart. Add your first product and earn Shine loyalty points</p>

            <a href="/" class="btn btn-blue btn-lg">Search now</a>
            </div>
        </div>
    </div>
{% endif %}

{% endblock container %}


{% block js_section %}
    {{block.super}}

    {% compress js %}
        <script src="{% static 'shinelearn/js/mobile/cart/cart.js' %}"></script>
    {% endcompress %}
    
    {% block johukum %}
    {% endblock johukum %}
{% endblock js_section %}