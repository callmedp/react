{% extends "basic/base.html" %}
{% load static compress %}
{% block title %}
    Reset Password
{% endblock title %}
{% block css_section %}
    {{block.super}}
    {% compress css inline %}
    <style type="text/css">
        .error {
            color: red;
        }
    </style>
    {% endcompress %}
{% endblock css_section %}
{% block container %}
    <div class="row">
        <div class="col-lg-12">
            {% if messages %}
                {% for message in messages %}
                <div{% if message.tags %} class="alert alert-{{ message.tags }} alert-dismissable"{% endif %}>{{ message }}</div>
                {% endfor %}
            {% endif %}
        </div>
        <!-- /.col-lg-12 -->
    </div>
        <!-- /.row -->
    <!-- main section start -->
<div class="container pr">
    <header class="login-page-bg">
        <div class="login-bg-txt">
          <figure class="login-icon1"></figure>
            <strong>1 Lacs+</strong>
              Satisfied users
        </div>
        <div class="login-bg-txt">
          <figure class="login-icon2"></figure>
            <strong>300+</strong>
              Courses
        </div>
        <div class="login-bg-txt">
          <figure class="login-icon3"></figure>
            <strong>500+</strong>
              Professional resumes delivered
        </div>
    </header>

  <!-- login form start -->
    <div class="register reset-password-box">
       <div>
            <h1 class="modal-title">Reset your password</h1>
       </div>
        <form id="forgot_password" method="post" 
        action="{% url "users:update-password" %}">
            {% csrf_token %}
        
            {% for field in form %}
                <div class="form-group {% if field.errors %}error{% endif %}">
                    {{field}}
                    {% for error in  field.errors %}{{ error }}{% endfor %}
                </div>
            {% endfor %}
            <input type="hidden" name="email" value="{{email}}">
            <input type="hidden" name="token" value="{{token}}">
            <button type="submit" class="btn btn-primary submit">Submit</button>
        </form>
    </div>
  <!-- login form end -->
</div>
<!-- main section end -->
    
{% endblock container %}
{% block js_section %}
    {{block.super}}
<script type="text/javascript">

    $.validator.addMethod("pattern",
        function(value, element, regexp) {
            return this.optional(element) || regexp.test(value);
        },
        "Password must be the combination of alphanumeric, lowercase, uppercase and special character"
    );

    $("#forgot_password").validate({
        submitHandler: function(form) {
            form.submit();
        },
        rules: {
            new_password1: { 
                required: true,
                minlength: 8,
                maxlength: 15,
                pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&].{7,15}$/
            } , 

            new_password2: { 
                equalTo: "#id_new_password1",
                minlength: 8,
                maxlength: 15
           },
       },
        messages:{
            new_password1: { 
                required:"Please provide password",
                minlength: "Password should be atleast 8 characters long!"
            },
            new_password2: { 
                required:"Please provide confirm password",
                minlength: "Password should be atleast 8 characters long!"
            },
        }

    });
</script>
{% endblock js_section %}

{% block johukum %}
{% endblock johukum %}

{% block zendesk %}
{% endblock zendesk %}
